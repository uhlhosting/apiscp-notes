{"componentChunkName":"component---node-modules-gatsby-theme-code-notes-src-templates-note-js","path":"/apache-tips-and-tricks/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Apache tips and tricks\",\n  \"tags\": [\"apache\", \"rewriterules\", \"websockets\"],\n  \"emoji\": \"ðŸ¦…\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"These are some of the most useful .htaccess rules you'd need.\"), mdx(\"h2\", {\n    \"id\": \"rules\"\n  }, \"Rules\"), mdx(\"p\", null, \"Enabling RewriteEngine and setting RewriteBase\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"RewriteEngine On\\nRewriteBase /\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Setting the RewriteBase \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"is required\"), \" due to rule inheritance with synthetic addon domains and subdomains.  \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/apisnetworks/httpd-apache/blob/master/SOURCES/httpd-apnscp-rewrite-map.conf\"\n  }), \"Learn more here \\u2197\"))), mdx(\"p\", null, \"Enable caching\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"UnsetEnv no-cache\\n\")), mdx(\"p\", null, \"Prevents page not found on vanilla installs\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"DirectoryIndex disabled\\n\")), mdx(\"p\", null, \"Redirect HTTP to HTTPS\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"RequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}\\nRewriteCond %{HTTPS} !=on\\nRewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]\\n\")), mdx(\"p\", null, \"Proxy websocket requests\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"RewriteCond %{HTTP:Upgrade} =websocket [NC]\\nRewriteCond %{HTTP:Connection} =upgrade [NC]\\nRewriteRule ^ ws://127.0.0.1:40001%{REQUEST_URI} [P,L]\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note that 40001 is the port your app is listening to locally.\")), mdx(\"p\", null, \"Proxy generic HTTP requests\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"RewriteRule ^ http://127.0.0.1:40001%{REQUEST_URI} [P,L,QSA]\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note that 40001 is the port your app is listening to locally.\")), mdx(\"p\", null, \"Using a match result in a RewriteRule\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"RewriteRule ^(.*)$ http://127.0.0.1:40001/api/$1 [P,L,QSA]\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note that a request to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/example\"), \" will be proxied to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://127.0.0.1:40001/api/example\"), \".\")), mdx(\"h2\", {\n    \"id\": \"usage\"\n  }, \"Usage\"), mdx(\"p\", null, \"Here's an example of a fully fledged .htaccess proxying HTTP and WebSocket requests to a service \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"exposed locally\"), \" on port 40001:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"DirectoryIndex disabled\\nUnsetEnv no-cache\\n\\nRewriteEngine On\\nRewriteBase /\\n\\n# Redirect HTTP to HTTPS\\nRequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}\\nRewriteCond %{HTTPS} !=on\\nRewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]\\n\\n# Proxy websocket requests\\nRewriteCond %{HTTP:Upgrade} =websocket [NC]\\nRewriteCond %{HTTP:Connection} =upgrade [NC]\\nRewriteRule ^ ws://127.0.0.1:40001%{REQUEST_URI} [P,L]\\n\\n# Proxy generic HTTP requests\\nRewriteRule ^ http://127.0.0.1:40001%{REQUEST_URI} [P,L,QSA]\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Apache tips and tricks","tags":["apache","rewriterules","websockets"],"emoji":"ðŸ¦…","link":null},"fields":{"dateModified":"24th Mar 2022","slug":"/apache-tips-and-tricks/"},"tableOfContents":{"items":[{"url":"#rules","title":"Rules"},{"url":"#usage","title":"Usage"}]},"parent":{"__typename":"File","relativePath":"apache-tips-and-tricks.md"}}},"pageContext":{"id":"6eb64b83-3eed-5658-bd22-b247530f4ec4","previous":{"id":"d8d2a471-8e9b-53e1-9bb0-ea045b5845ab","frontmatter":{"title":"Tips on Cloning WordPress","tags":["wordpress","php","wp-cli"]},"fields":{"slug":"/cloning-wp/"}},"next":{"id":"f3d1dfef-ee8d-561f-a9a7-402de02615b7","frontmatter":{"title":"Additional appliance admins","tags":["user"]},"fields":{"slug":"/additional-admins/"}},"hasUntagged":false,"basePath":"/"}},"staticQueryHashes":["1437003973","2744905544","3664657028","467212769","467212769"]}